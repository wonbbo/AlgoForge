# AlgoForge PRD v1.0 FINAL

## 1. 프로젝트 개요
AlgoForge는 개인 연구자를 위한 **전략 개발·비교·개선 목적의 웹 기반 백테스팅 도구**이다.
본 제품은 실거래를 목표로 하지 않으며, 전략의 구조적 품질과 재현성을 평가하는 데 목적이 있다.

## 2. 목표
- 동일 조건에서 항상 동일 결과를 보장하는 재현성 확보
- 전략 간 구조적 품질 비교 가능
- 빠른 실험과 반복 연구 지원

## 3. 사용자
- 단일 사용자 (본인)
- 연구용 / 실험적 사용

## 4. 거래 및 포지션 모델
- 선물 거래
- 롱 / 숏 양방향
- 레버리지 고정 배율
- 동시에 하나의 포지션만 보유 가능

## 5. 체결 모델
- 모든 진입 및 청산은 **신호 발생 봉의 종가(close fill)** 기준
- 체결 가격은 항상 `dc`

## 6. 비용 모델 (MVP)
- 거래 수수료: 0
- 슬리피지: 0
- 펀딩비: 0
> 비용 요소는 전략 구조 비교에 영향을 주지 않으므로 v2에서 확장

## 7. 리스크 관리
- 1 트레이드 최대 손실: 초기 자산의 2%
- Risk Reward Ratio: 1 : 1.5
- TP1 도달 시:
  - 포지션 50% 청산
  - 잔여 50%의 손절선을 진입가(BE)로 이동
- 잔여 종료 조건:
  - BE 도달
  - 반대 방향 진입 신호 발생

## 8. 우선순위 규칙
동일 봉에서 여러 이벤트 발생 시:
1. Stop Loss
2. TP1
3. Reverse Signal

## 9. 전략 정의
- 전략은 규칙 기반(Core Strategy)으로 정의
- 선택적으로 Hook(진입 필터) 사용 가능
- Hook은 진입 허용/차단만 가능하며 가격·사이즈·SL/TP 조작 불가

## 10. 진입 신호 처리
- 포지션 보유 중에는 신규 진입을 허용하지 않음
- 반대 방향 신호는 청산 트리거로만 사용
- 롱/숏 신호가 동시에 발생하면 진입하지 않음

## 11. Trade 정의
- 하나의 trade란 **진입부터 최종 종료까지의 전체 과정**
- 부분청산(TP1)은 동일 trade에 속함

## 12. Metrics 정책
- trades_count = 0 인 경우:
  - win_rate = 0
  - tp1_hit_rate = 0
  - be_exit_rate = 0

## 13. 전략 평가
- 비교 평가(B): 동일 데이터셋 내 점수 기반 랭킹
- 절대 등급(A): S/A/B/C/D 제공

## 14. 전략 중복 정책
- 동일 strategy_hash는 중복 저장을 허용
- 단, 동일 전략임을 명확히 인지할 수 있도록 hash 기반 식별 제공

## 15. MVP 범위 외
- 비용 모델 확장
- 멀티 타임프레임
- 복수 포지션
- 실거래 연동
